# .github/workflows/main.yml
# Numele workflow-ului
name: Node.js CI and Validation Test

# ğŸ¯ DeclanÈ™area workflow-ului
on:
  push:
    # RuleazÄƒ cÃ¢nd se face push pe branch-ul principal
    branches: [ "main", "master" ]
  pull_request:
    # RuleazÄƒ cÃ¢nd se deschide un Pull Request cÄƒtre branch-ul principal
    branches: [ "main", "master" ]

# âš™ï¸ Job-urile care vor fi executate
jobs:
  # Numele Job-ului
  test_validation:
    # RuleazÄƒ pe cea mai recentÄƒ versiune de Ubuntu
    runs-on: ubuntu-latest

    # Strategia pentru a testa pe diferite versiuni de Node.js (Standard Pro)
    strategy:
      matrix:
        node-version: [18.x, 20.x]
        # PuteÈ›i adÄƒuga '21.x' sau '22.x' dacÄƒ doriÈ›i sÄƒ testaÈ›i pe cele mai noi versiuni.

    steps:
    # 1. Checkout: DescarcÄƒ codul din repo
    - uses: actions/checkout@v4
      with:
        # PÄƒstreazÄƒ istoricul complet pentru a suporta testarea
        fetch-depth: 0

    # 2. Setup Node.js: ConfigureazÄƒ mediul Node.js
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v4
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm' # ActiveazÄƒ caching-ul pentru o instalare mai rapidÄƒ

    # 3. Instalarea DependinÈ›elor (doar pentru a avea package.json, chiar dacÄƒ e gol)
    - name: Install dependencies
      run: npm install

    # 4. Rularea Testelor Unitare (Pasul Critic)
    # FoloseÈ™te scriptul 'test' definit Ã®n package.json
    - name: Run Validation Tests
      run: npm test

    # 5. Pas OpcÈ›ional: Verificarea StilizÄƒrii (Linter - DacÄƒ aÈ›i adÄƒuga unul)
    # - name: Run Linter (Optional)
    #   run: npm run lint
